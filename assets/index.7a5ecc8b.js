var L=Object.defineProperty,j=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var b=(s,e,t)=>e in s?L(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,f=(s,e)=>{for(var t in e||(e={}))P.call(e,t)&&b(s,t,e[t]);if(C)for(var t of C(e))S.call(e,t)&&b(s,t,e[t]);return s},h=(s,e)=>j(s,k(e));import{j as v,u as A,r as D,Q as E,a as R,b as $}from"./vendor.d20aa874.js";const F=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}};F();const Q="modulepreload",O={},q="/",W=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${q}${n}`,n in O)return;O[n]=!0;const r=n.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${o}`))return;const i=document.createElement("link");if(i.rel=r?"stylesheet":Q,r||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),r)return new Promise((a,y)=>{i.addEventListener("load",a),i.addEventListener("error",y)})})).then(()=>e())},l=v.exports.jsx,p=v.exports.jsxs,g=v.exports.Fragment;function B({date:s}){var t,n;const e=new Intl.DateTimeFormat([],{weekday:"short"});return isNaN(s.getTime())?l(g,{children:"N/A"}):l(g,{children:(n=(t=e.formatToParts(s).find(r=>r.type==="weekday"))==null?void 0:t.value)!=null?n:"N/A"})}function I({startDate:s,endDate:e}){const t=new Intl.DateTimeFormat([],{hour:"numeric",minute:"numeric"});return isNaN(s.getTime())||isNaN(e.getTime())?l(g,{children:"N/A"}):l(g,{children:t.formatRange(s,e)})}function K(){return A("time_slots",async()=>(await(await fetch("/time_slots")).json()).map(t=>h(f({},t),{time_slots_by_day:t.time_slots.map(n=>h(f({},n),{start_time:new Date(n.start_time),end_time:new Date(n.end_time)})).reduce((n,r)=>{const o=r.start_time.getDay();return n[o]||(n[o]=[]),n[o].push(r),n[o].sort((i,a)=>i.start_time.getTime()-a.start_time.getTime()),n},{})})))}function V(){var r,o;const{isLoading:s,data:e}=K(),[t,n]=D.exports.useState({});return p("div",{style:{display:"grid",gridTemplateColumns:`repeat(${(r=e==null?void 0:e.length)!=null?r:1}, 1fr)`,gridTemplateRows:"auto 1fr",height:"100vh"},children:[s?l("div",{children:"Loading slots..."}):null,e==null?void 0:e.map(({id:i,name:a})=>p("div",{children:[l("h2",{children:a}),p("div",{"data-testid":"reservation","data-company":i,children:["Reservation:"," ",t[i]?l(I,{startDate:t[i].start_time,endDate:t[i].end_time}):"None"]})]},i)),l("div",{style:{overflow:"auto",gridColumn:"span 3",display:"grid",gridTemplateColumns:`repeat(${(o=e==null?void 0:e.length)!=null?o:1}, 1fr)`},children:e==null?void 0:e.map(({id:i,time_slots_by_day:a})=>l(D.exports.Fragment,{children:l("div",{"data-testid":"timeslots","data-company":i,children:Object.entries(a).map(([y,T])=>p("div",{children:[l("h3",{style:{textAlign:"center"},children:l(B,{date:T[0].start_time})}),l("div",{style:{display:"flex",flexDirection:"column"},children:T.map(({start_time:c,end_time:d})=>{var N;const[_,u]=(N=Object.entries(t).find(([,m])=>m&&(c>=m.start_time&&c<m.end_time||d>m.start_time&&d<=m.end_time)))!=null?N:[null,null],x=_===`${i}`,w=(u==null?void 0:u.start_time.getTime())===c.getTime()&&(u==null?void 0:u.end_time.getTime())===d.getTime();return l("button",{onClick:()=>{n(h(f({},t),{[i]:w?null:{start_time:c,end_time:d}}))},disabled:_?!x:!1,style:{display:"block",borderColor:x&&w?"red":void 0,padding:5,margin:5},"data-testid":"timeslot",children:l(I,{startDate:c,endDate:d})},c.toISOString()+d.toISOString())})})]},y))})},i))})]})}const z=new E;function G(){return l(R,{client:z,children:l(V,{})})}W(()=>import("./browser.9a6cd7e1.js"),["assets/browser.9a6cd7e1.js","assets/vendor.d20aa874.js"]).then(({worker:s})=>s.start());$.exports.render(l(G,{}),document.getElementById("root"));
