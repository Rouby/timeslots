var O=Object.defineProperty,_=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var C=(n,e,t)=>e in n?O(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,f=(n,e)=>{for(var t in e||(e={}))A.call(e,t)&&C(n,t,e[t]);if(b)for(var t of b(e))F.call(e,t)&&C(n,t,e[t]);return n},p=(n,e)=>_(n,L(e));import{j as y,u as S,r as D,Q as k,a as R,b as P}from"./vendor.fabcd17f.js";const Q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}};Q();const s=y.exports.jsx,g=y.exports.jsxs,h=y.exports.Fragment;function $({date:n}){var t,o;const e=new Intl.DateTimeFormat([],{weekday:"short"});return isNaN(n.getTime())?s(h,{children:"N/A"}):s(h,{children:(o=(t=e.formatToParts(n).find(r=>r.type==="weekday"))==null?void 0:t.value)!=null?o:"N/A"})}function j({startDate:n,endDate:e}){const t=new Intl.DateTimeFormat([],{hour:"numeric",minute:"numeric"});return isNaN(n.getTime())||isNaN(e.getTime())?s(h,{children:"N/A"}):s(h,{children:t.formatRange(n,e)})}function q(){return S("time_slots",async()=>(await(await fetch("/time_slots")).json()).map(t=>p(f({},t),{time_slots_by_day:t.time_slots.map(o=>p(f({},o),{start_time:new Date(o.start_time),end_time:new Date(o.end_time)})).reduce((o,r)=>{const i=r.start_time.getDay();return o[i]||(o[i]=[]),o[i].push(r),o[i].sort((l,m)=>l.start_time.getTime()-m.start_time.getTime()),o},{})})))}function E(){var r,i;const{isLoading:n,data:e}=q(),[t,o]=D.exports.useState({});return g("div",{style:{display:"grid",gridTemplateColumns:`repeat(${(r=e==null?void 0:e.length)!=null?r:1}, 1fr)`,gridTemplateRows:"auto 1fr",height:"100vh"},children:[n?s("div",{children:"Loading slots..."}):null,e==null?void 0:e.map(({id:l,name:m})=>g("div",{children:[s("h2",{children:m}),g("div",{"data-testid":"reservation","data-company":l,children:["Reservation:"," ",t[l]?s(j,{startDate:t[l].start_time,endDate:t[l].end_time}):"None"]})]},l)),s("div",{style:{overflow:"auto",gridColumn:"span 3",display:"grid",gridTemplateColumns:`repeat(${(i=e==null?void 0:e.length)!=null?i:1}, 1fr)`},children:e==null?void 0:e.map(({id:l,time_slots_by_day:m})=>s(D.exports.Fragment,{children:s("div",{"data-testid":"timeslots","data-company":l,children:Object.entries(m).map(([I,T])=>g("div",{children:[s("h3",{style:{textAlign:"center"},children:s($,{date:T[0].start_time})}),s("div",{style:{display:"flex",flexDirection:"column"},children:T.map(({start_time:a,end_time:d})=>{var w;const[v,c]=(w=Object.entries(t).find(([,u])=>u&&(a>=u.start_time&&a<u.end_time||d>u.start_time&&d<=u.end_time)))!=null?w:[null,null],x=v===`${l}`,N=(c==null?void 0:c.start_time.getTime())===a.getTime()&&(c==null?void 0:c.end_time.getTime())===d.getTime();return s("button",{onClick:()=>{o(p(f({},t),{[l]:N?null:{start_time:a,end_time:d}}))},disabled:v?!x:!1,style:{display:"block",borderColor:x&&N?"red":void 0,padding:5,margin:5},"data-testid":"timeslot",children:s(j,{startDate:a,endDate:d})},a.toISOString()+d.toISOString())})})]},I))})},l))})]})}const B=new k;function K(){return s(R,{client:B,children:s(E,{})})}P.exports.render(s(K,{}),document.getElementById("root"));
